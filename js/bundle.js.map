{"version":3,"sources":["webpack:///webpack/bootstrap e80e72fac29e15070112","webpack:///./js/main.js","webpack:///./js/game.jsx","webpack:///./js/gem.jsx","webpack:///./js/options.js","webpack:///./js/grid.jsx"],"names":["$","document","ready","game","instance","Game","grid_size","grid","Phaser","width","height","AUTO","preload","create","update","enableDebug","load","atlasJSONHash","startEl","debug","console","log","arguments","bounds","getBounds","gridPos","getScore","increment","step","matchArr","nextPos","nextEl","getElementAt","gem","isMatch","push","up","down","matches","GameSingleton","ignore_debug","gem_prefixs","gem_size","w","h","m","Gem","clickCallback","_clickCallback","xPos","yPos","gemType","phaser","rnd","integerInRange","length","name","sprite","add","inputEnabled","events","onInputDown","onClick","otherGem","ptr","x","y","left","right","hasMatch","direction","next","currMatches","Object","freeze","GridElement","_gridPos","v","_gem","newGem","reposition","onGemClick","bind","gridClickCallback","otherGridEl","oldGem","Grid","currentSelected","i","Array","fill","map","xVal","xIdx","xArr","yVal","yIdx","yArr","onGridElementClick","gridEl","canSwap","swapGems","checkForMatch","getXIndex","getYindex","currentX","currentY","Math","ceil","pos"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e80e72fac29e15070112","import Game from './game.jsx';\n\n$(document).ready(function(){\n  var game = Game.instance;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./js/main.js","import Gem from './gem.jsx';\nimport Grid from './grid.jsx';\n\nclass Game {\n  get phaser(){ return this.game; }\n\n  constructor(){\n    this.grid_size = [15, 9];\n    this.grid = null;\n    this.game = new Phaser.Game(this.grid_size[0] * Gem.width, this.grid_size[1] * Gem.height, Phaser.AUTO, 'game-canvas', {\n      preload: () => this.preload(),\n      create: () => this.create(),\n      update: () => this.update(),\n      enableDebug: false\n    });\n  }\n\n  preload(){\n    this.game.load.atlasJSONHash('gems', 'images/gems.png', 'images/gems-hash.json');\n  }\n\n  create(){\n    this.grid = new Grid(this.grid_size[0], this.grid_size[1])\n  }\n\n  update(){\n\n  }\n\n  checkForMatch(startEl){\n    if(debug)console.log('checkForMatch called', arguments, this);\n\n  }\n\n  getYAxisScore(startEl){\n    var bounds = this.grid.getBounds(startEl.gridPos);\n\n    var getScore = (increment, step, matchArr) => {\n      matchArr = matchArr || [];\n      increment=+step;\n\n      var nextPos = startEl.gridPos + increment,\n          nextEl = this.grid.getElementAt(nextPos);\n\n      //TODO do bounds check\n      \n      if(startEl.gem.isMatch(nextEl.gem)){\n        matchArr.push(nextEl);\n        return getScore(increment, step, matchArr);\n      }\n\n      return {\n        'score' : increment - 1,\n        'matches' : matchArr\n      };\n    };\n\n    var up = getScore(0, 1),\n        down = getScore(0, -1);\n\n    if(up.matches + down.matches > 2){\n\n    }\n  }\n\n  getXAxisScore(startEl){\n    var bounds = this.grid.getBounds(startEl.gridPos);\n  }\n}\n\nvar instance = null;\nclass GameSingleton{\n  static get instance(){\n    if(!instance){\n      instance = new Game();\n    }\n\n    return instance;\n  }\n}\n\nexport default GameSingleton;\n\n\n\n// WEBPACK FOOTER //\n// ./js/game.jsx","import Game from './game.jsx';\nimport Options from './options.js';\nconst debug = Options.debug && (Options.ignore_debug.gem !== true);\n\nconst gem_prefixs = [\n  'yellow', 'blue', 'green', 'red', 'purple', 'pink'\n];\n\nconst gem_size = {\n  w: 55,\n  h: 82,\n  m: 5\n};\n\nclass Gem{\n  static get width(){ return gem_size.w; }\n  static get height(){ return gem_size.h; }\n  static get margin(){ return gem_size.m; }\n\n  set clickCallback(clickCallback) { this._clickCallback = clickCallback}\n\n  constructor(xPos, yPos, clickCallback){\n    this._clickCallback = clickCallback;\n    this.gemType = Game.instance.phaser.rnd.integerInRange(0, gem_prefixs.length-1);\n    this.name = gem_prefixs[ this.gemType ] + '_gem_1';\n    this.sprite = Game.instance.phaser.add.sprite(xPos, yPos, 'gems', this.name);\n\n    this.sprite.inputEnabled = true;\n    this.sprite.events.onInputDown.add(this.onClick, this);\n  }\n\n  isMatch(otherGem){\n    return this.gemType === otherGem.gemType;\n  }\n\n  onClick(sprite, ptr){\n    if(debug)console.log('onClick called', arguments, this);\n\n    this._clickCallback(...arguments);\n  }\n\n  reposition(x, y){\n    if(debug)console.log('reposition called', arguments, this);\n\n    this.sprite.x = x;\n    this.sprite.y = y;\n  }\n}\n\nvar gem = function(left, right, up, down){\n  this.isMatch = function(gem){\n    return this.gemType === gem.gemType;\n  };\n\n  this.hasMatch = function(direction){\n    if(typeof direction !== 'undefined'){\n      return this.isMatch(this[direction]) ? (this[direction].hasMatch(direction) + 1) : 0;\n    }else{\n      var matches = 0;\n      for(var next in ['up', 'down', 'left', 'right']){\n        if(this.isMatch(this[next])){\n          var currMatches = this[next].hasMatch(next);\n          if(currMatches > 3){\n            matches += currMatches;\n          }\n        }\n      }\n\n      return matches;\n    }\n  }\n};\n\nexport default Gem;\n\n\n\n// WEBPACK FOOTER //\n// ./js/gem.jsx","export default Object.freeze({\n  debug: true,\n  ignore_debug: {\n    gem: true\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./js/options.js","import Gem from './gem.jsx';\nimport Game from './game.jsx';\nimport Options from './options.js';\nconst debug = Options.debug;\n\n/*\n  Grid position is going from top to bottom and left to right\n  ie a 2x2 grid would have the positions like so\n  -----\n  |1|3|\n  |2|4|\n  ----\n*/\n\nclass GridElement{\n  get gridPos(){ return this._gridPos; }\n  set gridPos(v){ return; } //dont want this settable externally\n  get gem(){ return this._gem; }\n  set gem(newGem){\n    this._gem = newGem;\n    this._gem.reposition(this.xPos, this.yPos);\n    this._gem.clickCallback = this.onGemClick.bind(this);\n  }\n\n  constructor(xPos, yPos, gridPos, gridClickCallback){\n    this.xPos = xPos;\n    this.yPos = yPos;\n    this._gridPos = gridPos;\n    this.gridClickCallback = gridClickCallback;\n\n    this.gem = new Gem(this.xPos, this.yPos, this.onGemClick.bind(this));\n  }\n\n  onGemClick(sprite, ptr){\n    if(debug)console.log('onGemClick called', arguments, this);\n    this.gridClickCallback(...arguments, this);\n  }\n\n  swapGems(otherGridEl){\n    var oldGem = this.gem;\n    this.gem = otherGridEl.gem;\n    otherGridEl.gem = oldGem;\n  }\n}\n\nclass Grid{\n  constructor(x, y){\n    this.currentSelected = null;\n    this.width = x;\n    this.height = y;\n\n    var i = 1;\n    this.grid = Array(x).fill().map((xVal, xIdx, xArr) => {\n      return Array(y).fill().map((yVal, yIdx, yArr) => {\n        var xPos = ((xIdx + 1) * Gem.width) - Gem.width,\n            yPos = ((yIdx + 1) * Gem.height) - Gem.height;\n\n        return new GridElement(xPos, yPos, i++, this.onGridElementClick.bind(this));\n      });\n    });\n  }\n\n  onGridElementClick(sprite, ptr, gridEl){\n    if(debug)console.log('onGridElementClick called', arguments, this);\n\n    if(this.currentSelected === null){ //selected an intial gem to move\n      if(debug)console.log('select');\n      this.currentSelected = gridEl;\n    }else if(this.currentSelected === gridEl){ //deselected intial gem\n      if(debug)console.log('deselect');\n      this.currentSelected = null;\n    }else if(this.canSwap(this.currentSelected, gridEl)){\n      if(debug)console.log('swap');\n      this.currentSelected.swapGems(gridEl);\n      this.currentSelected = null;\n      Game.instance.checkForMatch(gridEl); //this is not great\n    }else{\n      if(debug)console.log('illegal move');\n      this.currentSelected = null;\n    }\n  }\n\n  getElementAt(gridPos){\n    if(debug)console.log('getElementAt called', arguments, this);\n\n    var xPos = this.getXIndex(gridPos),\n        yPos = this.getYindex(gridPos);\n\n    return this.grid[xPos][yPos];\n  }\n\n  getBounds(gridPos){\n    var currentX = this.getXIndex(gridPos),\n        currentY = this.getYindex(gridPos);\n\n    return {\n      'top' : (currentY === 0) ?  gridPos : (gridPos - (currentY + 1)),\n      'bottom' : (currentY === this.height-1) ?  gridPos : (gridPos + (currentY + 1 - this.height)),\n      'left' : (currentX === 0) ?  gridPos : (gridPos - (currentX * this.height)),\n      'right' : (currentX === this.width-1) ?  gridPos : (gridPos - ((currentX + 1 - this.width) * this.height))\n    };\n  }\n\n  getXIndex(gridPos){\n    return Math.ceil(this.width / pos);\n  }\n\n  getYindex(gridPos){\n    return this.width % pos;\n  }\n\n  canSwap(gridEl, otherGridEl){\n    if(debug)console.log('onGridElementClick canSwap', arguments, this, gridEl.gridPos, otherGridEl.gridPos);\n\n    return (gridEl.gridPos + this.height) === otherGridEl.gridPos\n            || (gridEl.gridPos - this.height) === otherGridEl.gridPos\n            || (gridEl.gridPos + 1) === otherGridEl.gridPos\n            || (gridEl.gridPos - 1) === otherGridEl.gridPos\n  }\n}\n\nexport default Grid;\n\n\n\n// WEBPACK FOOTER //\n// ./js/grid.jsx"],"sourceRoot":""}