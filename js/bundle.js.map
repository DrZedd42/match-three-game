{"version":3,"sources":["webpack:///webpack/bootstrap 718dba649ef107e7e82e","webpack:///./js/main.js","webpack:///./js/game.jsx","webpack:///./js/gem.jsx","webpack:///./js/options.js","webpack:///./js/grid.jsx"],"names":["$","document","ready","game","instance","debug","ignore_debug","Game","grid_size","grid","Phaser","width","height","AUTO","preload","create","update","enableDebug","load","atlasJSONHash","firstEl","secondEl","console","log","arguments","getScore","funcName","startEl","matchArr","lastEl","nextPos","gridPos","nextEl","getElementAt","gem","isMatch","push","Object","keys","map","key","idx","xMatches","yMatches","length","GameSingleton","gem_prefixs","gem_size","w","h","m","Gem","_gemType","a","clickCallback","_clickCallback","xPos","yPos","phaser","rnd","integerInRange","name","gemType","sprite","add","inputEnabled","events","onInputDown","onClick","otherGem","ptr","x","y","freeze","GridElement","_gridPos","v","_gem","newGem","reposition","onGemClick","bind","gridClickCallback","otherGridEl","oldGem","Grid","currentSelected","i","Array","fill","xVal","xIdx","xArr","yVal","yIdx","yArr","onGridElementClick","gridEl","canSwap","swapGems","checkForMatch","getXIndex","getYindex","currentPos","retPos","bounds","getBounds","top","bottom","left","right","currentX","currentY","ret","pos","Math","ceil"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 718dba649ef107e7e82e","import Game from './game.jsx';\n\n$(document).ready(function(){\n  var game = Game.instance;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./js/main.js","import Gem from './gem.jsx';\nimport Grid from './grid.jsx';\nimport Options from './options.js';\nconst debug = Options.debug && (Options.ignore_debug.game !== true);\n\nclass Game {\n  get phaser(){ return this.game; }\n\n  constructor(){\n    //this.grid_size = [15, 9];\n    this.grid_size = [3, 3];\n    this.grid = null;\n    this.game = new Phaser.Game(this.grid_size[0] * Gem.width, this.grid_size[1] * Gem.height, Phaser.AUTO, 'game-canvas', {\n      preload: () => this.preload(),\n      create: () => this.create(),\n      update: () => this.update(),\n      enableDebug: false\n    });\n  }\n\n  preload(){\n    this.game.load.atlasJSONHash('gems', 'images/gems.png', 'images/gems-hash.json');\n  }\n\n  create(){\n    this.grid = new Grid(this.grid_size[0], this.grid_size[1])\n  }\n\n  update(){\n\n  }\n\n  checkForMatch(firstEl, secondEl){\n    if(debug)console.log('checkForMatch called', arguments, this);\n    //this.getYAxisScore(startEl);\n\n    var getScore = (funcName, startEl, matchArr, lastEl) => {\n      if(debug)console.log('getScore called', arguments, this);\n      matchArr = matchArr || [ startEl ];\n      lastEl = lastEl || startEl;\n\n      var nextPos = this.grid[funcName](lastEl.gridPos);\n\n      if(debug)console.log('getScore nextPos', nextPos, nextPos === null);\n\n      if(nextPos === null){\n        return matchArr;\n      }\n\n      var nextEl = this.grid.getElementAt(nextPos);\n\n      if(lastEl.gem.isMatch(nextEl.gem)){\n        matchArr.push(nextEl);\n        getScore(funcName, startEl, matchArr, nextEl);\n      }\n\n      return matchArr;\n    };\n\n    Object.keys(arguments).map((key, idx) => {\n      var xMatches = getScore('left', arguments[key]),\n          yMatches = getScore('up', arguments[key]);\n\n      getScore('right', arguments[key], xMatches);\n      getScore('down', arguments[key], yMatches);\n\n      if((yMatches.length + xMatches.length) > 2){\n        if(debug)console.log('matches found', xMatches, yMatches);\n\n        if(xMatches.length > 3){\n          //TODO something\n        }\n\n        if(yMatches.length > 3){\n            //TODO something\n        }\n\n      }else{\n        if(debug)console.log('no matches found', arguments, this);\n      }\n    });\n\n\n  }\n\n}\n\nvar instance = null;\nclass GameSingleton{\n  static get instance(){\n    if(!instance){\n      instance = new Game();\n    }\n\n    return instance;\n  }\n}\n\nexport default GameSingleton;\n\n\n\n// WEBPACK FOOTER //\n// ./js/game.jsx","import Game from './game.jsx';\nimport Options from './options.js';\nconst debug = Options.debug && (Options.ignore_debug.gem !== true);\n\nconst gem_prefixs = [\n  'yellow', 'blue', 'green', 'red', 'purple', 'pink'\n];\n\nconst gem_size = {\n  w: 55,\n  h: 82,\n  m: 5\n};\n\nclass Gem{\n  static get width(){ return gem_size.w; }\n  static get height(){ return gem_size.h; }\n  static get margin(){ return gem_size.m; }\n\n  get gemType(){ return this._gemType; }\n  set gemType(a){ return; }\n\n  set clickCallback(clickCallback) { this._clickCallback = clickCallback}\n\n  constructor(xPos, yPos, clickCallback){\n    this._clickCallback = clickCallback;\n    this._gemType = Game.instance.phaser.rnd.integerInRange(0, gem_prefixs.length-1);\n    this.name = gem_prefixs[ this.gemType ] + '_gem_1';\n    this.sprite = Game.instance.phaser.add.sprite(xPos, yPos, 'gems', this.name);\n\n    this.sprite.inputEnabled = true;\n    this.sprite.events.onInputDown.add(this.onClick, this);\n  }\n\n  isMatch(otherGem){\n    return this.gemType === otherGem.gemType;\n  }\n\n  onClick(sprite, ptr){\n    if(debug)console.log('onClick called', arguments, this);\n\n    this._clickCallback(...arguments);\n  }\n\n  reposition(x, y){\n    if(debug)console.log('reposition called', arguments, this);\n\n    this.sprite.x = x;\n    this.sprite.y = y;\n  }\n}\n\nexport default Gem;\n\n\n\n// WEBPACK FOOTER //\n// ./js/gem.jsx","export default Object.freeze({\n  debug: true,\n  ignore_debug: {\n    gem: true,\n    game: false\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./js/options.js","import Gem from './gem.jsx';\nimport Game from './game.jsx';\nimport Options from './options.js';\nconst debug = Options.debug;\n\n/*\n  Grid position is going from top to bottom and left to right\n  ie a 2x2 grid would have the positions like so\n  -----\n  |1|3|\n  |2|4|\n  ----\n*/\n\nclass GridElement{\n  get gridPos(){ return this._gridPos; }\n  set gridPos(v){ return; } //dont want this settable externally\n  get gem(){ return this._gem; }\n  set gem(newGem){\n    this._gem = newGem;\n    this._gem.reposition(this.xPos, this.yPos);\n    this._gem.clickCallback = this.onGemClick.bind(this);\n  }\n\n  constructor(xPos, yPos, gridPos, gridClickCallback){\n    this.xPos = xPos;\n    this.yPos = yPos;\n    this._gridPos = gridPos;\n    this.gridClickCallback = gridClickCallback;\n\n    this.gem = new Gem(this.xPos, this.yPos, this.onGemClick.bind(this));\n  }\n\n  onGemClick(sprite, ptr){\n    if(debug)console.log('onGemClick called', arguments, this);\n    this.gridClickCallback(...arguments, this);\n  }\n\n  swapGems(otherGridEl){\n    var oldGem = this.gem;\n    this.gem = otherGridEl.gem;\n    otherGridEl.gem = oldGem;\n  }\n}\n\nclass Grid{\n  constructor(x, y){\n    this.currentSelected = null;\n    this.width = x;\n    this.height = y;\n\n    var i = 1;\n    this.grid = Array(x).fill().map((xVal, xIdx, xArr) => {\n      return Array(y).fill().map((yVal, yIdx, yArr) => {\n        var xPos = ((xIdx + 1) * Gem.width) - Gem.width,\n            yPos = ((yIdx + 1) * Gem.height) - Gem.height;\n\n        return new GridElement(xPos, yPos, i++, this.onGridElementClick.bind(this));\n      });\n    });\n  }\n\n  onGridElementClick(sprite, ptr, gridEl){\n    if(debug)console.log('onGridElementClick called', arguments, this);\n\n    if(this.currentSelected === null){ //selected an intial gem to move\n      if(debug)console.log('select');\n      this.currentSelected = gridEl;\n    }else if(this.currentSelected === gridEl){ //deselected intial gem\n      if(debug)console.log('deselect');\n      this.currentSelected = null;\n    }else if(this.canSwap(this.currentSelected, gridEl)){\n      if(debug)console.log('swap');\n      this.currentSelected.swapGems(gridEl);\n      Game.instance.checkForMatch(this.currentSelected, gridEl);\n      this.currentSelected = null;\n    }else{\n      if(debug)console.log('illegal move');\n      this.currentSelected = null;\n    }\n  }\n\n  getElementAt(gridPos){\n    if(debug)console.log('getElementAt called', arguments, this);\n\n    var xPos = this.getXIndex(gridPos),\n        yPos = this.getYindex(gridPos);\n\n    if(debug)console.log('getElementAt', xPos, yPos);\n\n    return this.grid[xPos][yPos];\n  }\n\n  /*\n  * Get the grid element position above the current position\n  * @return {number} the grid position of the element or null if at the bounds of the grid\n  */\n  up(currentPos){\n    var retPos = currentPos - 1,\n        bounds = this.getBounds(currentPos);\n\n    if(bounds.top === currentPos){\n      return null;\n    }\n\n    return retPos;\n  }\n\n  /*\n  * Get the grid element position below the current position\n  * @return {number} the grid position of the element or null if at the bounds of the grid\n  */\n  down(currentPos){\n    var retPos = currentPos + 1,\n        bounds = this.getBounds(currentPos);\n\n    if(bounds.bottom === currentPos){\n      return null;\n    }\n\n    return retPos;\n  }\n\n  /*\n  * Get the grid element position to the left the current position\n  * @return {number} the grid position of the element or null if at the bounds of the grid\n  */\n  left(currentPos){\n    var retPos = currentPos - this.height,\n        bounds = this.getBounds(currentPos);\n\n    if(debug)console.log('left called', retPos, arguments, this);\n\n    if(bounds.left === currentPos){\n      return null;\n    }\n\n    return retPos;\n  }\n\n  /*\n  * Get the grid element position to the right the current position\n  * @return {number} the grid position of the element or null if at the bounds of the grid\n  */\n  right(currentPos){\n    var retPos = currentPos + this.height,\n        bounds = this.getBounds(currentPos);\n\n    if(debug)console.log('right called', retPos, arguments, this);\n\n    if(bounds.right === currentPos){\n      return null;\n    }\n\n    return retPos;\n  }\n\n  getBounds(gridPos){\n    var currentX = this.getXIndex(gridPos),\n        currentY = this.getYindex(gridPos),\n        ret = { //FIXME this might be better breaking across lines as there is brackets and arrows everywhere :S\n          'top' : gridPos - currentY,\n          'bottom' : gridPos + (this.height - (currentY + 1)),\n          'left' : ((pos) => (pos <= 0) ? gridPos : pos )(gridPos - this.height),\n          'right' : ((pos) => (pos > (this.width * this.height)) ? gridPos : pos )(gridPos + this.height)\n        };\n\n    if(debug)console.log('getBounds called', ret, arguments, this);\n\n    return ret;\n  }\n\n  getXIndex(gridPos){\n    if(debug)console.log('getXIndex called', arguments, this);\n    return Math.ceil(gridPos / this.width) - 1;\n  }\n\n  getYindex(gridPos){\n    if(debug)console.log('getYindex called', arguments, this);\n\n    return ((pos) => pos || this.height)(gridPos % this.height) - 1;\n  }\n\n  canSwap(gridEl, otherGridEl){\n    if(debug)console.log('onGridElementClick canSwap', arguments, this, gridEl.gridPos, otherGridEl.gridPos);\n\n    return (gridEl.gridPos + this.height) === otherGridEl.gridPos\n            || (gridEl.gridPos - this.height) === otherGridEl.gridPos\n            || (gridEl.gridPos + 1) === otherGridEl.gridPos\n            || (gridEl.gridPos - 1) === otherGridEl.gridPos\n  }\n}\n\nexport default Grid;\n\n\n\n// WEBPACK FOOTER //\n// ./js/grid.jsx"],"sourceRoot":""}